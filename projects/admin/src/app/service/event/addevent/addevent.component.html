<app-header-with-back [pageTitle]="'Add Event'"></app-header-with-back>
<section>
  <div class="scroll">
    <div class="tabs">
      <div class="tab" (click)="submit('area')">Details</div>
      <div class="tab" (click)="submit('catalogue')">Itinerary</div>
      <div class="tab" (click)="submit('donation')">Slab</div>
      <div class="tab" (click)="submit('event')">city</div>
    </div>
  </div>
  <!-- detail form pannel -->
  <div class="container form1" *ngIf="'details' == pannel ? true : false">
    <form [formGroup]="eventForm">
      <div class="form-group">
        <label for="eventName">Event Name</label>
        <input type="text" class="event-name" formControlName="eventName" />
      </div>
      <div class="form-group">
        <label for="description">Description</label>
        <textarea
          id="description"
          name="description"
          formControlName="description"
        >
        </textarea>
      </div>
      <div class="dateset">
        <div class="form-group">
          <label>Start Date</label>
          <input type="date" formControlName="startDate" class="dataset1" />
        </div>
        <div class="form-group">
          <label for="endDate">End Date</label>
          <input
            type="date"
            id="endDate"
            formControlName="endDate"
            class="dataset1"
          />
        </div>
      </div>
    </form>
    <div class="header">
      <label>Add Images (2:1 ratio)</label>
      <button type="button" (click)="triggerFileInput()">
        <img src="/assets/addevent/upload.svg" alt="" />
      </button>
      <input
        id="fileInput"
        type="file"
        (change)="addImage($event)"
        multiple
        accept="image/*"
        style="display: none"
      />
    </div>
    <div class="images-grid">
      <div
        *ngFor="let image of imagesArray.controls; let i = index"
        class="image-item"
      >
        <img [src]="image.value" alt="Uploaded Image" />

        <button type="button" class="remove-btn" (click)="removeImage(i)">
          &#10006;
        </button>
      </div>
    </div>
    <div class="buttonset fix-below">
      <button class="cancel-button">cancel</button>
      <button class="next-button" (click)="nextpannel('Itinerary')">
        Next
      </button>
    </div>
  </div>

  <!-- itinerary form pannel -->
  <div *ngIf="'Itinerary' == pannel ? true : false">
    <form [formGroup]="itineraryForm">
      <ng-container formArrayName="activities">
        <div
          class="activity-form form1"
          *ngFor="let activity of activities.controls; let i = index"
          [formGroupName]="i"
        >
          <div class="form-group1">
            <label for="activityName">Activity Name</label>
            <input
              id="activityName"
              type="text"
              formControlName="name"
              class="activity-name"
            />
          </div>
          <div class="form-group1">
            <label for="date">Date</label>
            <input
              id="date"
              type="date"
              formControlName="date"
              class="activity-name"
            />
          </div>
          <div class="dateset2">
            <div>
              <label for="startTime">Start Time</label>
              <input
                id="startTime"
                type="time"
                formControlName="startTime"
                class="dataset3"
              />
            </div>
            <div>
              <label for="endTime">End Time</label>
              <input
                id="endTime"
                type="time"
                formControlName="endTime"
                class="dataset3"
              />
            </div>
          </div>
          <div class="delete">
            <button
              class="delete-button"
              class="button"
              (click)="deleteActivity(i)"
            >
              Delete <img src="/assets/addevent/delete.svg" alt="" />
            </button>
          </div>
        </div>
        <button class="Add-btn" (click)="addActivity()">add Activity</button>
        <div class="twin-btn fix-below">
          <lib-cancel-btn [btnName]="'Cancel'"></lib-cancel-btn>
          <lib-save-btn
            [btnName]="'Next'"
            (click)="nextpannel('slab')"
          ></lib-save-btn>
        </div>
      </ng-container>
    </form>
  </div>

  <div *ngIf="'slab' == pannel ? true : false">
    <form [formGroup]="slabAndVariantForm">
      <ng-container formArrayName="slabs">
        <div
          class="activity-form form1"
          *ngFor="let activity of slabs.controls; let i = index"
          [formGroupName]="i"
        >
          <mat-accordion>
            <mat-expansion-panel>
              <mat-expansion-panel-header>
                <mat-panel-title> slabname </mat-panel-title>
                <mat-slide-toggle></mat-slide-toggle>
                <img src="/assets/addevent/delete.svg" alt="" />
              </mat-expansion-panel-header>
              <div class="activity-form form-group1">
                <form>
                  <div class="form-group">
                    <label>Event Name</label>
                    <input
                      type="text"
                      name="eventName"
                      formControlName="name"
                      class="event-name"
                    />
                  </div>
                  <div class="form-group">
                    <label>Description</label>
                    <textarea id="description" name="description" formControlName="description" > </textarea>
                  </div>
                  <div class="dateset">
                    <div class="form-group">
                      <label>Start Date</label>
                      <input
                        type="date"
                        name="startDate"
                        value="2024-07-13"
                        class="dataset1"
                        formControlName="startDate"
                      />
                    </div>
                    <div class="form-group">
                      <label>End Date</label>
                      <input
                        type="date"
                        name="endDate"
                        value="2024-07-15"
                        class="dataset1"
                        formControlName="endDate"
                      />
                    </div>
                  </div>
                </form>

                <div>
                  <div class="field mt">
                    <div
                      class="title-with-icon input_box_bg_gradient header_text_color"
                    >
                      <p>Add Image</p>

                      <input
                        type="file"
                        #fileInput
                        style="display: none"
                        (change)="changePhoto($event, i)"
                        accept="image/*"
                      />
                      <img
                        src="assets/tax/pin.svg"
                        alt="upload photo"
                        (click)="fileInput.click()"
                      />
                    </div>
                  </div>
                </div>
                <div class="full-w mt-m" *ngIf="activity.get('image')?.value" >
                  <img [src]="activity.get('image')?.value" alt="slab Photo" />
                  <img class="top-r-corner"(click)="removeImageOfSlab(i)" src="assets/tax/cross.svg" />
                </div>
              </div>
              <button class="Add-btn"  (click)="openBottomSheet(i)" >add varient</button>

            </mat-expansion-panel>
          </mat-accordion>
        </div>
        <button class="Add-btn" (click)="addSlab()">Add Slab</button>
        <div class="twin-btn fix-below">
          <lib-cancel-btn [btnName]="'Cancel'"></lib-cancel-btn>
          <lib-save-btn
            [btnName]="'Next'"
            (click)="nextpannel('slab')"
          ></lib-save-btn>
        </div>
      </ng-container>
    </form>
  </div>
  <!-- slab form pannel -->
  <!-- <div *ngIf="'slab' == pannel ? true : false"> -->

  <!-- <form [formGroup]="slabAndVariantForm">
      <mat-accordion>
        <mat-expansion-panel
          *ngFor="let slab of slabs.controls; let i = index"
          [formGroupName]="i">
          <mat-expansion-panel-header>
            <mat-panel-title>Slab name</mat-panel-title>
            <mat-slide-toggle></mat-slide-toggle>
            <img src="/assets/addevent/delete.svg" alt="" />
          </mat-expansion-panel-header>
          <div class="activity-form form-group1">
            <div class="form-group">
              <label>Event Name</label>
              <input
                type="text"
                formControlName="name"
                class="event-name"
              />
            </div>
            <div class="form-group">
              <label for="description">Description</label>
              <textarea
                id="description"
                formControlName="description"
              ></textarea>
            </div>
            <div class="dateset">
              <div class="form-group">
                <label>Start Date</label>
                <input
                  type="date"
                  formControlName="startDate"
                  class="dataset1"
                />
              </div>
              <div class="form-group">
                <label>End Date</label>
                <input
                  type="date"
                  formControlName="endDate"
                  class="dataset1"
                />
              </div>
            </div>
            <button class="Add-btn" (click)="openBottomSheet()">Add variant</button>
          </div>
        </mat-expansion-panel>
      </mat-accordion>
    </form> -->

  <!-- <div formArrayName="slab" *ngFor="let slab of slabs.controls; let i = index">
      <div [formGroupName]="i">
        <input formControlName="name" placeholder="Name" />
        <input formControlName="description" placeholder="Description" />
        <input formControlName="startDate" placeholder="Start Date" />
        <input formControlName="endDate" placeholder="End Date" />
    
        <div>
          <input placeholder="Image URL" readonly />
          <button (click)="removeImageOfSlab(i)">Remove Image</button>
        </div>

        <input type="file" (change)="uploadImageOfSlab($event, i)" />
    
      </div>
    </div>  -->

  <!-- <mat-accordion  >
    <mat-expansion-panel *ngFor="let event of events; let eventIndex = index">
      <mat-expansion-panel-header>
        <mat-panel-title>
          {{ event.name }}
        </mat-panel-title>
        <mat-slide-toggle  ></mat-slide-toggle> 
        <img src="/assets/addevent/delete.svg" alt="">
      </mat-expansion-panel-header>
      <div class="activity-form form-group1" >
        <form>
            <div class="form-group">
                <label for="eventName{{eventIndex}}">Event Name</label>
                <input type="text" id="eventName{{eventIndex}}"  name="eventName" value="Searic Kashi Summit 2024" class="event-name">
            </div>
            <div class="form-group">
                <label for="description{{eventIndex}}">Description</label>
                <textarea id="description" name="description" >
                    
                </textarea>
            </div>
            <div class="dateset">
                <div class="form-group">
                    <label for="startDate">Start Date</label>
                    <input type="date" id="startDate" name="startDate" value="2024-07-13" class="dataset1">
                </div>
                <div class="form-group">
                    <label for="endDate">End Date</label>
                    <input type="date" id="endDate" name="endDate" value="2024-07-15" class="dataset1">
                </div>
            </div>
 
        </form>
    
        <div class="header">
            <label >Add Images (2:1 ratio)</label>
            <button (click)="triggerFileInput()"><img src="/assets/addevent/upload.svg" alt="">
            </button>
            <input id="fileInput1" type="file" (change)="addImageinslab($event, eventIndex)" multiple accept="image/*" style="display: none;">
        </div>
          <div class="images-grid">
            <div *ngFor="let image of event.images1; let imageIndex = index"class="image-item">
              <img [src]="image" alt="Uploaded Image">
              <button class="remove-btn" (click)="removeImageslab(eventIndex, imageIndex)">&#10006;</button>
            </div>
          </div>
          <div class="variant-set" *ngFor="let variant of event.variants; let variantIndex = index">
            <div class="variant-details">
              <span class="variant-name">{{ variant.name }}</span>
              <span class="variant-price">₹ {{ variant.price }}</span>
            </div>
            <div class="variant-actions">
              <button mat-icon-button >
                <mat-icon>{{ variant.isActive ? 'toggle_on' : 'toggle_off' }}</mat-icon>
              </button>
              <button mat-icon-button >
                <mat-icon>edit</mat-icon>
              </button>
              <button mat-icon-button color="warn" >
                <mat-icon ><img src="/assets/addevent/delete.svg" alt=""></mat-icon>
              </button>
            </div>
          </div>
          <button class="Add-btn" (click)="openBottomSheet()" >add varient</button>
    </div>
    </mat-expansion-panel>
  </mat-accordion> -->

  <!--     
  <button class="Add-btn" (click)="addSlab()">Add Slab</button>

    <div class="twin-btn fix-below">
      <lib-cancel-btn [btnName]="'Cancel'"></lib-cancel-btn>
      <lib-save-btn
        [btnName]="'Next'"
        (click)="nextpannel('city')"
      ></lib-save-btn>
    </div>
  </div> -->

  <!--city form pannel  -->
  <!--<div *ngIf="'city'== pannel?true: false">
  <div class="twin-btn">
    <lib-cancel-btn [btnName]="'Cancel'"></lib-cancel-btn>
    <lib-save-btn  [btnName]="'Next'"  ></lib-save-btn>
  </div>
</div> -->
</section>
